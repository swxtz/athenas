{"version":3,"sources":["../../src/users/users.service.ts"],"sourcesContent":["import { HttpException, Injectable } from \"@nestjs/common\";\nimport { CreateUserDTO } from \"./dtos/create-user.dto\";\nimport { PrismaService } from \"src/prisma/prisma.service\";\nimport { ArgonService } from \"src/argon/argon.service\";\n\n@Injectable()\nexport class UsersService {\n    constructor(\n        private prisma: PrismaService,\n        private argon: ArgonService,\n    ) {}\n\n    async createUser(user: CreateUserDTO) {\n        const { email, name, password } = user;\n\n        const verifyUser = await this.prisma.user.findFirst({\n            where: { email },\n        });\n\n        if (verifyUser) {\n            throw new HttpException(\"Esse email ja esta cadastrado.\", 400);\n        }\n\n        try {\n            const user = await this.prisma.user.create({\n                data: {\n                    email,\n                    name,\n                    password: await this.argon.hash(password),\n                },\n            });\n\n            return { message: \"usuario criado com sucesso\", data: { ...user } };\n        } catch (err) {\n            console.log(err);\n            throw new HttpException(err, 500);\n        }\n    }\n}\n"],"names":["UsersService","createUser","user","email","name","password","verifyUser","prisma","findFirst","where","HttpException","create","data","argon","hash","message","err","console","log","constructor","Injectable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAMaA;;;eAAAA;;;wBAN6B;+BAEZ;8BACD;;;;;;;;;;AAGtB,IAAA,AAAMA,eAAN,MAAMA;IAMT,MAAMC,WAAWC,IAAmB,EAAE;QAClC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,QAAQ,EAAE,GAAGH;QAElC,MAAMI,aAAa,MAAM,IAAI,CAACC,MAAM,CAACL,IAAI,CAACM,SAAS,CAAC;YAChDC,OAAO;gBAAEN;YAAM;QACnB;QAEA,IAAIG,YAAY;YACZ,MAAM,IAAII,qBAAa,CAAC,kCAAkC;QAC9D;QAEA,IAAI;YACA,MAAMR,OAAO,MAAM,IAAI,CAACK,MAAM,CAACL,IAAI,CAACS,MAAM,CAAC;gBACvCC,MAAM;oBACFT;oBACAC;oBACAC,UAAU,MAAM,IAAI,CAACQ,KAAK,CAACC,IAAI,CAACT;gBACpC;YACJ;YAEA,OAAO;gBAAEU,SAAS;gBAA8BH,MAAM;oBAAE,GAAGV,IAAI;gBAAC;YAAE;QACtE,EAAE,OAAOc,KAAK;YACVC,QAAQC,GAAG,CAACF;YACZ,MAAM,IAAIN,qBAAa,CAACM,KAAK;QACjC;IACJ;IA9BAG,YACI,AAAQZ,MAAqB,EAC7B,AAAQM,KAAmB,CAC7B;aAFUN,SAAAA;aACAM,QAAAA;IACT;AA4BP;AAhCab;IADZoB,IAAAA,kBAAU;;;eAGa,4BAAa,4BAAb,4BAAa;eACd,0BAAY,4BAAZ,0BAAY;;GAHtBpB"}